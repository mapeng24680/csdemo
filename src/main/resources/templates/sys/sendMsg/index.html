<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:include="include/includebase"></head>
<body>

<form id="userForm"  role="form" method="post" action="user/save">
    <div class="row">
        <div class="col-md-12">
            <div class="form-group" >
                <label for="orderMsg">订单信息:</label>
                <textarea  class="form-control" style="height: 400px" name="orderMsg" id="orderMsg" placeholder="请输入订单信息"></textarea>
            </div>
            <input type="hidden" name="id"/>
        </div>
        <div style="text-align: center;margin-top: 20px;">
        <button type="button" id="btnSave" class="btn btn-primary">保存</button></div>
    </div>
</form>
<script th:inline="javascript">
    $(function () {
      $.get('/publish/selectMsg', function(resp) {
        if (resp.result) {
          $('#orderMsg').val(data.needMsg);
        }
      });

      // 绑定dialog的确定按钮的监听事件
      $("#btnSave").click(function() {
        var params = {
          needMsg: $("#orderMsg").val(),
          // commission:$("#commission").val() || 0,
        }
        $.ajax({
          type: "POST",
          url: "/publish/insertOrUpdate",
          data: params, //JSON.stringify(params),
          // headers: {
          //   "Content-Type": "application/json",
          // },
          dataType: "json",
          success: function(data) {
            if(data.result){
              window.Ewin.alert({
                message:'增加数据成功!'
              });
            }
          }
        });
      });
    })
</script>
</body>
</html>